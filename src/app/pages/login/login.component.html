<div class="d-flex align-items-center justify-content-center" style="min-height: 100vh; background-color: #f8f9fa;">
  <div class="card shadow-lg border-0" style="width: 100%; max-width: 450px; border-radius: 15px;">
    <!-- Card Header -->
    <div class="card-header text-center bg-white border-0" style="border-radius: 15px 15px 0 0; padding: 2rem 1.5rem 1rem;">
      <h2 class="mb-2 fw-bold text-primary">
        <i class="bi bi-lock-fill me-2"></i>Iniciar Sesión
      </h2>
      <p class="text-muted mb-0 small">
        Accede a tu cuenta para gestionar tu salud
      </p>
    </div>

    <!-- Card Body -->
    <div class="card-body p-4">
      <!-- Selector de Tipo de Usuario -->
      <div class="d-flex gap-2 mb-4 justify-content-center">
        <button
          *ngFor="let tipo of userTypes"
          type="button"
          (click)="selectUserType(tipo.value)"
          [ngClass]="{
            'btn btn-primary': loginForm.get('tipo')?.value === tipo.value,
            'btn btn-outline-secondary': loginForm.get('tipo')?.value !== tipo.value
          }"
          class="btn btn-sm flex-grow-1"
        >
          {{ tipo.label }}
        </button>
      </div>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <!-- DNI -->
        <div class="mb-3">
          <label for="dni" class="form-label fw-bold">
            <i class="bi bi-card-text me-1"></i>DNI
          </label>
          <input
            id="dni"
            type="text"
            formControlName="dni"
            class="form-control"
            [class.is-invalid]="loginForm.get('dni')?.touched && loginForm.get('dni')?.errors"
            placeholder="Tu número de DNI"
          />
          <div class="invalid-feedback d-block" *ngIf="loginForm.get('dni')?.touched && loginForm.get('dni')?.errors">
            <p *ngIf="loginForm.get('dni')?.errors?.['required']" class="mb-0">El DNI es obligatorio.</p>
            <p *ngIf="loginForm.get('dni')?.errors?.['pattern']" class="mb-0">El DNI debe ser numérico de 7 u 8 dígitos.</p>
          </div>
        </div>

        <!-- Contraseña -->
        <div class="mb-3">
          <label for="password" class="form-label fw-bold">
            <i class="bi bi-key me-1"></i>Contraseña
          </label>
          <div class="input-group">
            <input
              id="password"
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              class="form-control"
              [class.is-invalid]="loginForm.get('password')?.touched && loginForm.get('password')?.errors"
              placeholder="Tu contraseña"
            />
            <button 
              type="button" 
              (click)="showPassword = !showPassword" 
              class="btn btn-outline-secondary"
            >
              <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
            </button>
          </div>
          <div class="invalid-feedback d-block" *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.errors">
            <p *ngIf="loginForm.get('password')?.errors?.['required']" class="mb-0">La contraseña es obligatoria.</p>
            <p *ngIf="loginForm.get('password')?.errors?.['minlength']" class="mb-0">La contraseña debe tener al menos 6 caracteres.</p>
          </div>
        </div>

        <!-- Botón de envío -->
        <button
          type="submit"
          [disabled]="loginForm.invalid || isLoading"
          class="btn btn-primary w-100 fw-bold py-2 mb-3"
        >
          <span *ngIf="isLoading" class="me-2">
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          </span>
          {{ isLoading ? 'Iniciando...' : 'Iniciar Sesión' }}
        </button>
      </form>

      <!-- Olvidé contraseña -->
      <div class="text-center mb-3">
        <a routerLink="/resetear-password" class="text-decoration-none">
          <small class="text-primary fw-bold">¿Olvidaste tu contraseña?</small>
        </a>
      </div>

      <!-- Divider -->
      <hr class="my-3" />

      <!-- Registro -->
      <div class="text-center">
        <small class="text-muted">¿No tienes una cuenta?</small>
        <br />
        <a href="/login/registro-paciente" class="btn btn-outline-primary btn-sm mt-2 w-100">
          <i class="bi bi-person-plus me-1"></i>Regístrate aquí
        </a>
      </div>
    </div>
  </div>
</div>